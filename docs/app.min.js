"use strict";var synth=window.speechSynthesis,textForm=document.querySelector("form"),textInput=document.querySelector("#text-input"),voiceSelect=document.querySelector("#voice-select"),rate=document.querySelector("#rate"),rateValue=document.querySelector("#rate-value"),pitch=document.querySelector("#pitch"),pitchValue=document.querySelector("#pitch-value"),body=document.querySelector("body"),voices=[],getVoices=function(){(voices=synth.getVoices()).forEach(function(e){var t=document.createElement("option");t.textContent=e.name+"("+e.lang+")",t.setAttribute("data-lang",e.lang),t.setAttribute("data-name",e.name),voiceSelect.appendChild(t)})};getVoices(),void 0!==synth.onvoiceschanged&&(synth.onvoiceschanged=getVoices);var speak=function(){if(synth.speaking)return console.error("Already speaking..."),!1;if(""!==textInput.value){body.style.background="#141414 url(wave.gif)",body.style.backgroundSize="100% 100%";var t=new SpeechSynthesisUtterance(textInput.value);t.onend=function(e){e.preventDefault(),body.style.background="#141414"},t.onerror=function(e){e.preventDefault(),console.error("Something went wrong")};var n=voiceSelect.selectedOptions[0].getAttribute("data-name");voices.forEach(function(e){e.name===n&&(t.voice=e)}),t.rate=rate.value,t.pitch=pitch.value,synth.speak(t)}};textForm.addEventListener("submit",function(e){e.preventDefault(),speak(),textInput.blur()}),rate.addEventListener("change",function(e){e.preventDefault(),rateValue.textContent=rate.value}),pitch.addEventListener("change",function(e){e.preventDefault(),pitchValue.textContent=pitch.value}),voiceSelect.addEventListener("change",function(e){e.preventDefault(),speak()});